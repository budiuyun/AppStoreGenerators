<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>不丢云应用生成器 - Helm Chart生成工具</title>
    <link rel="stylesheet" href="css/simple-style.css">
    <script src="https://unpkg.com/js-yaml@4.1.0/dist/js-yaml.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
</head>
<body>
    <header>
        <h1>不丢云应用生成器</h1>
    </header>

    <main>
        <div class="container">
            <div class="tabs">
                <button class="tab-btn active" data-tab="basic">基本信息</button>
                <button class="tab-btn" data-tab="image">容器镜像</button>
                <button class="tab-btn" data-tab="service">服务配置</button>
                <button class="tab-btn" data-tab="resources">资源与存储</button>
                <button class="tab-btn" data-tab="env">环境变量</button>
                <button class="tab-btn" data-tab="preview">预览生成</button>
            </div>

            <div class="tab-content">
                <!-- 基本信息 -->
                <div class="tab-pane active" id="basic">
                    <h2>基本信息</h2>
                    <div class="form-group">
                        <label for="name">应用名称 *</label>
                        <input type="text" id="name" placeholder="例如：mysql" required>
                    </div>
                    <div class="form-group">
                        <label for="version">应用版本 *</label>
                        <input type="text" id="version" placeholder="例如：v1.0.0" value="v1.0.0" required>
                    </div>
                    <div class="form-group">
                        <label for="appVersion">应用程序版本 *</label>
                        <input type="text" id="appVersion" placeholder="例如：8.0" value="1.0.0" required>
                    </div>
                    <div class="form-group">
                        <label for="description">应用描述 *</label>
                        <textarea id="description" placeholder="简要描述应用功能" required></textarea>
                    </div>
                    <div class="form-group">
                        <label for="icon">图标URL *</label>
                        <input type="text" id="icon" placeholder="例如：https://example.com/icon.png" required>
                    </div>
                    <div class="form-group">
                        <label for="category">应用分类 *</label>
                        <select id="category" required>
                            <option value="应用工具">应用工具</option>
                            <option value="数据库">数据库</option>
                            <option value="开发工具">开发工具</option>
                            <option value="监控工具">监控工具</option>
                            <option value="网络工具">网络工具</option>
                            <option value="安全工具">安全工具</option>
                            <option value="存储工具">存储工具</option>
                            <option value="其他">其他</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="maintainerName">维护者姓名 *</label>
                        <input type="text" id="maintainerName" placeholder="例如：niehaoran" required>
                    </div>
                    <div class="form-group">
                        <label for="maintainerEmail">维护者邮箱 *</label>
                        <input type="email" id="maintainerEmail" placeholder="例如：example@example.com" required>
                    </div>
                </div>

                <!-- 容器镜像 -->
                <div class="tab-pane" id="image">
                    <h2>容器镜像</h2>
                    <div class="form-group">
                        <label for="imageRegistry">镜像仓库地址 *</label>
                        <input type="text" id="imageRegistry" value="docker.io" required>
                    </div>
                    <div class="form-group">
                        <label for="repository">镜像名称 *</label>
                        <input type="text" id="repository" placeholder="例如：mysql" required>
                    </div>
                    <div class="form-group">
                        <label for="tag">镜像标签 *</label>
                        <input type="text" id="tag" placeholder="例如：8.0" value="latest" required>
                    </div>
                    <div class="form-group">
                        <label for="pullPolicy">镜像拉取策略 *</label>
                        <select id="pullPolicy" required disabled>
                            <option value="IfNotPresent" selected>IfNotPresent (推荐)</option>
                        </select>
                        <p class="info">出于安全和性能考虑，镜像拉取策略固定为IfNotPresent</p>
                    </div>
                </div>

                <!-- 服务配置 -->
                <div class="tab-pane" id="service">
                    <h2>服务配置</h2>
                    <div class="form-group">
                        <label for="serviceType">服务类型 *</label>
                        <select id="serviceType" required disabled>
                            <option value="ClusterIP" selected>ClusterIP</option>
                        </select>
                        <p class="info">服务类型固定为ClusterIP</p>
                    </div>
                    
                    <div class="port-section">
                        <h3>服务端口配置</h3>
                        <p class="info">可以添加多个端口，每个端口需要指定名称和端口号</p>
                        <div id="port-container">
                            <div class="port-row">
                                <input type="text" class="port-name" placeholder="端口名称" value="http">
                                <input type="number" class="port-number" placeholder="端口号" value="80" min="1" max="65535">
                                <button type="button" class="remove-port">删除</button>
                            </div>
                        </div>
                        <button type="button" id="add-port">添加端口</button>
                    </div>
                </div>

                <!-- 资源与存储 -->
                <div class="tab-pane" id="resources">
                    <h2>资源与存储</h2>
                    
                    <div class="section">
                        <h3>网络带宽限制</h3>
                        <p class="info">网络带宽限制必须启用</p>
                        <div class="network-settings">
                            <div class="form-group">
                                <label for="egress">出站带宽限制</label>
                                <input type="text" id="egress" placeholder="例如：1M" value="1M">
                                <p class="field-desc">格式为数字+单位(K,M,G)</p>
                            </div>
                            <div class="form-group">
                                <label for="ingress">入站带宽限制</label>
                                <input type="text" id="ingress" placeholder="例如：1M" value="1M">
                                <p class="field-desc">格式为数字+单位(K,M,G)</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="section">
                        <h3>资源配置</h3>
                        <div class="form-group">
                            <label for="limitsCpu">CPU限制</label>
                            <input type="text" id="limitsCpu" placeholder="例如：200m" value="200m">
                            <p class="field-desc">可以是m(千分之一核)或直接的核心数</p>
                        </div>
                        <div class="form-group">
                            <label for="limitsMemory">内存限制</label>
                            <input type="text" id="limitsMemory" placeholder="例如：256Mi" value="256Mi">
                            <p class="field-desc">可以是Mi(兆字节)或Gi(吉字节)</p>
                        </div>
                        <div class="form-group">
                            <label for="requestsCpu">CPU请求</label>
                            <input type="text" id="requestsCpu" placeholder="例如：100m" value="100m">
                            <p class="field-desc">可以是m(千分之一核)或直接的核心数</p>
                        </div>
                        <div class="form-group">
                            <label for="requestsMemory">内存请求</label>
                            <input type="text" id="requestsMemory" placeholder="例如：128Mi" value="128Mi">
                            <p class="field-desc">可以是Mi(兆字节)或Gi(吉字节)</p>
                        </div>
                    </div>
                    
                    <div class="section">
                        <h3>持久化存储</h3>
                        <div class="form-group">
                            <label for="persistenceEnabled">启用持久化存储</label>
                            <input type="checkbox" id="persistenceEnabled" checked>
                        </div>
                        <div class="persistence-settings">
                            <div class="form-group">
                                <label for="path">数据挂载路径</label>
                                <input type="text" id="path" placeholder="例如：/data" value="/data">
                            </div>
                            <div class="form-group">
                                <label for="accessMode">访问模式</label>
                                <select id="accessMode">
                                    <option value="ReadWriteOnce">ReadWriteOnce (单节点读写)</option>
                                    <option value="ReadOnlyMany">ReadOnlyMany (多节点只读)</option>
                                    <option value="ReadWriteMany">ReadWriteMany (多节点读写)</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="size">存储大小</label>
                                <input type="text" id="size" placeholder="例如：1Gi" value="1Gi">
                                <p class="field-desc">格式为数字+单位(Mi,Gi,Ti)</p>
                            </div>
                            <div class="form-group">
                                <label for="storageClass">存储类名称</label>
                                <input type="text" id="storageClass" placeholder="例如：local" value="local">
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 环境变量 -->
                <div class="tab-pane" id="env">
                    <h2>环境变量</h2>
                    <p class="info">添加应用程序所需的环境变量，系统会自动生成env1、env2等格式的环境变量配置。</p>
                    
                    <div id="env-container">
                        <!-- 动态添加的环境变量输入框将显示在这里 -->
                        <div class="env-row">
                            <input type="text" class="env-name" placeholder="环境变量名称" value="APP_MODE">
                            <input type="text" class="env-value" placeholder="环境变量值" value="production">
                            <input type="text" class="env-title" placeholder="变量中文名称" value="运行模式">
                            <input type="text" class="env-desc" placeholder="变量描述" value="应用程序运行模式">
                            <button type="button" class="remove-env">删除</button>
                        </div>
                    </div>
                    
                    <button type="button" id="add-env">添加环境变量</button>
                </div>

                <!-- 预览生成 -->
                <div class="tab-pane" id="preview">
                    <h2>预览生成</h2>
                    
                    <div class="preview-tabs">
                        <button class="preview-tab active" data-preview="chart">Chart.yaml</button>
                        <button class="preview-tab" data-preview="values">values.yaml</button>
                        <button class="preview-tab" data-preview="schema">values.schema.json</button>
                        <button class="preview-tab" data-preview="deployment">deployment.yaml</button>
                        <button class="preview-tab" data-preview="service">service.yaml</button>
                        <button class="preview-tab" data-preview="pvc">pvc.yaml</button>
                        <button class="preview-tab" data-preview="helpers">_helpers.tpl</button>
                    </div>
                    
                    <div class="preview-content">
                        <pre id="preview-chart" class="active"></pre>
                        <pre id="preview-values"></pre>
                        <pre id="preview-schema"></pre>
                        <pre id="preview-deployment"></pre>
                        <pre id="preview-service"></pre>
                        <pre id="preview-pvc"></pre>
                        <pre id="preview-helpers"></pre>
                    </div>
                    
                    <div class="action-buttons">
                        <button id="download-btn">下载Helm Chart文件包</button>
                        <button id="reset-btn">重置表单</button>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <footer>
        <p>© 2023 不丢云应用生成器 | <a href="https://github.com/yourusername/AppStoreGenerators-" target="_blank">GitHub</a></p>
        <p class="footer-note">基于开源技术构建，适用于Kubernetes环境下的应用部署</p>
    </footer>

    <script src="js/simple-script.js"></script>
</body>
</html> 